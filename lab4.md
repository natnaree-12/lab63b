# การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล

## วัตถุประสงค์
1.เพื่อทำความเข้าใจเกี่ยวกับการเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัล

2.เพื่อทำความเข้าใจเกี่ยวกับการทำงานของเซนเซอร์ตัวจับแสง

## อุปกรณ์ที่ใช้ 
1.microcontroller ESP01

2.USB

3.Serial Port Compuuter

4.Computer

5.Adapter

6.เซนเซอร์ตรวจจับแสง

## ศึกษาข้อมูลเบื้องต้น
* https://www.youtube.com/watch?v=CCnN1WJsXQY&ab_channel=TANI-IOT

## วิธีการทำการทดลอง
1.ต่อสาย USB เข้า Serial Port จากนั้นเสียบ Adapter ทับลงบน Serial Port

![image](https://user-images.githubusercontent.com/80879788/112347789-c1236600-8cf9-11eb-86db-a88de73a826b.png)

2.เสียบ microcontroller ESP01 ลงบน Adapter

![image](https://user-images.githubusercontent.com/80879788/112348112-1a8b9500-8cfa-11eb-9a3d-aa04c43143b6.png)

3.เตรียมดาวน์โหลดโปรแกรม
  * พิมพ์ ls กด Enter แสดง platformio.ini src
  * พิมพ์ pwd กด Enter

![image](https://user-images.githubusercontent.com/80879788/112368738-f9cd3a80-8d0d-11eb-96da-4baba1f993af.png)
  
  * พิมพ์ vi src/main.cpp กด Enter แสดงโปรแกรมดังรูป

![image](https://user-images.githubusercontent.com/80879788/112368879-22edcb00-8d0e-11eb-8580-1d16942bf7b7.png)

4.อัปโหลดโปรแกรมเข้าสู่ microcontroller
  * พิมพ์ pio run -t upload กด Enter
  * ขณะที่ run เพื่อให้ microcontroller รับข้อมูลใหม่เข้าไป ให้กดปุ่มดังรูป
  
![image](https://user-images.githubusercontent.com/80879788/112369380-b6bf9700-8d0e-11eb-8c72-f25f11e907c6.png)

5.เมื่อโปรแกรมทำการดาวน์โหลดเสร็จแล้ว
  * พิมพ์ pio device monitor กด Enter เพื่อดูผลลัพธ์จากคอมพิวเตอร์

6.จากนั้นต่อเซนเซอร์ตรวจจับแสง ดังรูป

![image](https://user-images.githubusercontent.com/80879788/112372079-e8862d00-8d11-11eb-9ade-6c8f9703f542.png)

7.ต่อสายไฟสีขาวที่จุดที่นิ้วชี้อยู่ และสังเกตผล จากนั้นนำนิ้วมาบังเซนเซอร์ตรวจจับแสง และสังเกตผล

![image](https://user-images.githubusercontent.com/80879788/112372466-677b6580-8d12-11eb-84f8-9f6c075dfe84.png)

## การบันทึกผลการทดลอง
* เมื่อทำการพิมพ์ pio device monitor กด Enter เพื่อดูผลลัพธ์จากคอมพิวเตอร์ จะเห็นได้ว่าโปรแกรมจะขึ้น read 1 เมื่อไม่ได้จิ้มสายไฟสีขาว แต่ถ้านำไปจิ้มในช่องที่สายไฟสีแดง สีดำและสีเหลืองตัวโปรแกรมก็จะขึ้น read 0 
* เมื่อจิ้มสายไฟไปที่ช่องที่มีสายไฟสีดำก็จะทำให้หลอดไฟติด และถ้าหากกดปุ่มีดำค้างเอาไว้ตัวโปรแกรมก็จะขึ้น read 0 ทำให้เมื่อเรากดปุ่มสีดำค้างเอาไว้หลอดไฟก็จะติดตลอดเวลา 
* เมื่อนำตัวเซนต์เซอร์ตัวจับแสงไปต่อ พบว่า เมื่อนำนิ้วมือไปบังแสงโปรแกรมจะขึ้น read 1 คือไฟไม่ติด แต่เมื่อเอานิ้วมือออก พบว่า โปรแกรมจะขึ้น read 0 คือไฟติด

  * read 1

![image](https://user-images.githubusercontent.com/80879788/112370685-43b72000-8d10-11eb-944e-f383f3891d6f.png)

  * read 0

![image](https://user-images.githubusercontent.com/80879788/112370799-6812fc80-8d10-11eb-82c4-37a1b3540403.png)

 * เมื่อไม่ได้บังแสงเซนเซอร์ตรวจจับแสง
 
 ![image](https://user-images.githubusercontent.com/80879788/112373771-e9b85980-8d13-11eb-9f4e-b3cb7dbce397.png)

 * เมื่อบังแสงเซนเซอร์ตรวจจับแสง
 
 ![image](https://user-images.githubusercontent.com/80879788/112373981-22f0c980-8d14-11eb-9521-c3dc396e1e03.png)


## อภิปรายผลการทดลอง
ในการทดลองนี้ใช้ microcontroller ESP01 ซึ่งมีทั้ง CPU และเสาสำหรับรับ wife ใช้ Serial Port Compuuter เป็นตัวป้อนโปรแกรมใส่ microcontroller ESP01 นอกจากนี้ในการทดลองนี้ยังมีการใช้ Adapter เข้ามาเป็นตัวสังเกตการทำงานของ microcontroller ซึ่งในตัวคำสั่งโปแกรม แบ่งเป็น 2 ส่วน ส่วนแรก setup ให้ port 0 แทน input และ ให้ port 2 แทน output โดยที่ port 0 คือ สายสีขาว และ ให้ port 2 คือ สายสีเหลือง ส่วนที่ 2 loop เริ่มจากพิจารณาที่ port 0 อ่านสัญญาณว่าเป็น0 หรือ 1 และแสดงว่าอ่านได้เท่าไร หลังจากนั้นก็จะเช็คว่า ถ้าหากเป็น 1 ไฟจะดับ แต่ถ้าเป็น 0 ไฟจะติด จากนั้นทำการอัปโหลดโปรแกรมและrunโปรแกรม จะเห็นได้ว่าโปรแกรมจะขึ้น read 1 เมื่อไม่ได้จิ้มสายไฟสีขาว แต่ถ้านำไปจิ้มในช่องที่สายไฟสีแดง สีดำและสีเหลืองตัวโปรแกรมก็จะขึ้น read 0 และเมื่อจิ้มสายไฟไปที่ช่องที่มีสายไฟสีดำก็จะทำให้หลอดไฟติด และถ้าหากกดปุ่มีดำค้างเอาไว้ตัวโปรแกรมก็จะขึ้น read 0 ทำให้เมื่อเรากดปุ่มสีดำค้างเอาไว้หลอดไฟก็จะติดตลอดเวลา จากนั้นเมื่อนำตัวเซนต์เซอร์ตัวจับแสงไปต่อ พบว่า เมื่อนำนิ้วมือไปบังแสงโปรแกรมจะขึ้น read 1 คือไฟไม่ติด แต่เมื่อเอานิ้วมือออก พบว่า โปรแกรมจะขึ้น read 0 คือไฟติด
